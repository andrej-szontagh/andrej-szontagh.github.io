function Animations(){}function loadJSON(t,e){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status&&e(JSON.parse(n.responseText))},n.send(null)}String.prototype.hashCode=function(){var t,e=0;if(0===this.length)return e;for(t=0;t<this.length;t++)e=(e<<5)-e+this.charCodeAt(t),e|=0;return e};var YouTubeAPIInitialized=!(Animations.prototype={triggers:[],constructor:Animations,applyLiveCSSAnimations:function(){for(var u=this,t=document.getElementsByTagName("*"),e=t.length;e--;){var n=t[e],o=window.getComputedStyle(n);if(h=o.getPropertyValue("--anim-play")){for(var a=o.getPropertyValue("--anim-init"),i=o.getPropertyValue("--anim-class"),r=o.getPropertyValue("--anim-trigger"),s=o.getPropertyValue("--anim-edge"),l=o.getPropertyValue("--anim-delay-min"),c=o.getPropertyValue("--anim-delay-max"),d=!1,g=0;g<u.triggers.length;g++){if((_=u.triggers[g]).target.contains(n)&&_.anim_play===h&&_.anim_init===a&&_.anim_class===i&&_.anim_trigger===r&&_.anim_edge===s&&_.anim_delay_min===l&&_.anim_delay_max===c){d=!0;break}if(n.contains(_.target)&&_.anim_play===h&&_.anim_init===a&&_.anim_class===i&&_.anim_trigger===r&&_.anim_edge===s&&_.anim_delay_min===l&&_.anim_delay_max===c){u.triggers.splice(g,1);break}}d||u.triggers.push({target:n,anim_play:h,anim_init:a,anim_class:i,anim_trigger:r,anim_edge:s,anim_delay_min:l,anim_delay_max:c})}}function m(){for(var t=[],e=0;e<u.triggers.length;e++){var n=u.triggers[e],o=n.target,a=n.anim_trigger,i=n.anim_init,r=n.anim_class,s=n.anim_play,l=n.anim_edge;isInViewport(a,l)?(i&&o.classList.remove(i),r?o.classList.add(r):o.style.setProperty("animation-name",s)):t.push(n)}u.triggers=t}for(e=0;e<u.triggers.length;e++){var _,b=(_=u.triggers[e]).target,h=_.anim_play;a=_.anim_init,i=_.anim_class,r=_.anim_trigger,s=_.anim_edge,l=_.anim_delay_min,c=_.anim_delay_max;a&&b.classList.add(a),l&&c&&(l=parseFloat(l),c=parseFloat(c),b.style.setProperty("animation-delay",l+(c-l)*Math.random()+"s")),_.anim_trigger=r="self"===r?b:document.getElementById(r),_.anim_edge=s=s?parseFloat(s):0}m(),window.addEventListener("resize",m),window.addEventListener("scroll",m),this.applyLiveCSSAnimations=null},isInViewport:function(t,e){var n=window.innerHeight,o=t.getBoundingClientRect(),a=n*Math.min(e,.4),i=o.top-a,r=o.bottom-a;return!((n-=2*a)<i||r<0)}}),YouTubeAPIPlayersQueue=[],YouTubeAPIPlayers=[];function YouTubeAPIAddPlayer(t){YouTubeAPIPlayersQueue.push(t)}function YouTubeAPIInit(){if(0==YouTubeAPIInitialized){YouTubeAPIInitialized=!0;var t=document.createElement("script");t.id="iframe-api",t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}}function onYouTubeIframeAPIReady(){for(var t=0;t<YouTubeAPIPlayersQueue.length;t++){var e=YouTubeAPIPlayersQueue[t],n=new YT.Player(e.id,e.params);YouTubeAPIPlayers.push(n)}}function Gallery(o,t){var a=this;function e(){var t=document.querySelectorAll(".gallery-block");if(t)for(var e=0;e<t.length;e++){var n=t[e];0==n.classList.contains("button-hover")&&(n.classList.add("button-hover"),n.classList.add("hidden"),n.setAttribute("button-target","<this>"),n.setAttribute("button-clear",".gallery-block"),n.___callback_open_lightbox=function(t){"gallery-images"===t.target.parentNode.id?a.manager_images.showLightbox(t.target.querySelector("img")):t.target.parentNode.id})}o.updateButtons()}a.manager_videos=new GalleryVideos(document.getElementById("gallery-videos"),"data/gallery-videos.json",t,0,function(){console.log("Video Gallery Initialized")}),a.manager_images=new GalleryImages(document.getElementById("gallery-images"),"data/gallery-images.json",function(){console.log("Image Gallery Initialized")},function(){console.log("Image Gallery Update"),e()}),e()}function GalleryVideos(t,e,s,l,u){var c=this;c.container=t,YouTubeAPIInit(),loadJSON(e,function(t){var e=-1;for(var n in t.videos)if(e++,t.videos.hasOwnProperty(n)){var o=t.videos[n],a=document.createElement("div"),i=document.createElement("img"),r=document.createElement("div");i.id="youtube-cover-"+e,r.id="youtube-player-"+e,i.src=o.cover,i.className="video-cover",a.className="video-wrapper gallery-block",a.appendChild(i),a.appendChild(r),c.container.appendChild(a),YouTubeAPIAddPlayer({id:r.id,params:{width:640,height:360,videoId:n,playerVars:{enablejsapi:1,loop:1,start:o.start,playlist:n,autoplay:0,controls:0,showinfo:0,fs:0,rel:0,disablekb:1,modestbranding:1,playsinline:1},events:{onReady:function(t){var e=t.target,n=e.getIframe();function o(){s.isInViewport(n.parentNode,l)?(void 0===e.timer&&(e.timer=null),null!=e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){s.isInViewport(n.parentNode,l)&&e.playVideo()},500)):e.pauseVideo()}e.mute(),e.setPlaybackQuality("small"),e.playVideo(),e.pauseVideo(),o(),window.addEventListener("resize",o),window.addEventListener("scroll",o)},onStateChange:function(t){var e=t.target.getIframe().parentNode.querySelector(".video-cover");switch(t.data){case YT.PlayerState.BUFFERING:e.classList.remove("cover-hidden"),e.classList.add("cover-visible");break;case YT.PlayerState.PLAYING:e.classList.remove("cover-visible"),e.classList.add("cover-hidden")}},onError:function(t){switch(t.data){case 2:console.log("YouTube API error 2");break;case 5:console.log("YouTube API error 5");break;case 100:console.log("YouTube API error 100");break;case 101:console.log("YouTube API error 101");break;case 150:console.log("YouTube API error 150")}}}}})}u()})}function GalleryImages(t,e,n,l){var u=this;u.container=t,u.lightbox=t.querySelector("#lightbox"),u.lightbox_img=t.querySelector("#lightbox-image"),u.lightbox_visible=!1,u.lightbox.onclick=function(t){u.hideLightbox()},u.hideLightbox(),u.layout=new Masonry("#gallery-images",{itemSelector:".gallery-block",columnWidth:".gallery-block",percentPosition:!0,transitionDuration:0,stagger:0,resize:!0}),loadJSON(e,function(s){!function t(e){if(e<s.images.length){var n=s.images[e],o=n.split(".").slice(0,-1).join("."),a=n.substring(o.length,n.length),i=o+"_tumbnail"+a,r=n;u.addImage(i,r,function(){l(),t(++e)})}}(0),n()})}function UI(){var e=this;e.ui=document.getElementById("ui"),e.body=document.getElementsByTagName("BODY")[0],window.addEventListener("touchstart",function t(){console.log("User touched !"),e.touch=!0,e.updateButtons(),window.removeEventListener("touchstart",t,!1)},!1),e.updateButtons();var t=e.ui.querySelector("#contact-button"),n=e.ui.querySelector("#contact-email"),o="szontagh";t.href="mailto:andrej."+o+"@gmail.com",n.innerHTML="andrej​.​"+o+" ​@ ​gmail​.​com";var a=document.getElementById("overlay");a.addEventListener("onvisible",function(t){e.ui.classList.add("overlay"),e.body.classList.add("noscroll")},!1),a.addEventListener("onhidden",function(t){e.ui.classList.remove("overlay"),e.body.classList.remove("noscroll")},!1)}Gallery.prototype={constructor:Gallery,manager_videos:null,manager_images:null,showLightbox:function(t){console.log("showLightbox")},hideLightbox:function(){console.log("hideLightbox")}},GalleryVideos.prototype={constructor:GalleryVideos},GalleryImages.prototype={constructor:GalleryImages,addImage:function(t,n,o){var a=this,i=document.createElement("div"),r=document.createElement("img");i.className="gallery-block",r.setAttribute("src",t),r.setAttribute("src-lightbox",n),i.appendChild(r),a.container.appendChild(i),r.addEventListener("load",function(t){a.layout.appended(t.target.parentNode),a.layout.layout(),o()}),r.addEventListener("error",function(){e.target.remove(),a.layout.layout(),o()})},showLightbox:function(t){this.lightbox.classList.remove("lightbox-hidden"),this.lightbox.classList.add("lightbox-visible"),this.lightbox_img.setAttribute("src",t.getAttribute("src")),this.lightbox_img.setAttribute("src-lazy",t.getAttribute("src-lightbox")),this.lightbox_img.onload=function(t){var e=t.target;e.src=e.getAttribute("src-lazy")},this.lightbox_visible=!0},hideLightbox:function(){this.lightbox.classList.remove("lightbox-visible"),this.lightbox.classList.add("lightbox-hidden"),this.lightbox_visible=!1}},UI.prototype={constructor:UI,touch:!1,body:null,ui:null,parseButtonStateRef:function(t){var e={value:null,value_ext:null,value_readonly:!1},n=t.getAttribute("button-state");return n&&((n=n.trim())&&0<n.length&&"["===n.charAt(0)&&"]"===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1),e.value_readonly=!0),"on"===n&&(e.value="on"),"off"!==n&&""!==n||(e.value="off"),n&&0<n.length&&"{"===n.charAt(0)&&"}"===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1),e.value_ext=n)),e},setButtonState:function(t,e,n){n=void 0===n||n;var o=this;if(t.classList.contains("button-hover")||t.classList.contains("button-press")){if(o.parseButtonStateRef(t).value_readonly||t.setAttribute("button-state",e),!0===n){var a=t.getAttribute("button-clear");if(null!==a)for(var i=o.body.querySelectorAll(a),r=0;r<i.length;r++)i[r]!==t&&"on"===o.getButtonState(i[r])&&o.setButtonState(i[r],"off",!1)}if("on"===e){if(!0===n)if(null!==(s=t.getAttribute("button-set-on")))for(i=o.body.querySelectorAll(s),r=0;r<i.length;r++)i[r]!==t&&o.setButtonState(i[r],e,!1);o.showButtonTargets(t,"button-target",!0)}if("off"===e){var s;if(!0===n)if(null!==(s=t.getAttribute("button-set-off")))for(i=o.body.querySelectorAll(s),r=0;r<i.length;r++)i[r]!==t&&o.setButtonState(i[r],e,!1);o.showButtonTargets(t,"button-target",!1)}}},getButtonState:function(t){var e=this.parseButtonStateRef(t);if("on"===e.value||"off"===e.value)return e.value;if(null!==e.value_ext){var n=this.body.querySelector(attr);if(n){var o=this.parseButtonStateRef(n);if("on"===o.value||"off"===o.value)return o.value}}return"off"},showButtonTargets:function(t,e,n){var o,a=t.getAttribute(e);if(a&&null!=(o="<this>"===a.trim()?[t]:this.body.querySelectorAll(a)))for(var i=0;i<o.length;i++){var r=o[i];n?(r.classList.remove("hidden"),r.classList.add("visible"),r.dispatchEvent(new Event("onvisible"))):(r.classList.remove("visible"),r.classList.add("hidden"),r.dispatchEvent(new Event("onhidden")))}},clearButtonEvents:function(t){t.removeEventListener("mouseenter",t.___button_listener_mouseenter),t.removeEventListener("mouseleave",t.___button_listener_mouseleave),t.removeEventListener("mousedown",t.___button_listener_mousedown),t.removeEventListener("mouseup",t.___button_listener_mouseup)},initButton:function(t){var o=this;o.clearButtonEvents(t),null===t.getAttribute("button-state")&&t.setAttribute("button-state","off"),t.classList.contains("button-hover")?(t.___button_listener_mouseleave=function(t){o.setButtonState(t.target,"off")},t.___button_listener_mouseenter=function(t){o.setButtonState(t.target,"on"),o.transformButtonByScrolls(t.target)},t.___button_listener_mousedown=function(t){t.target.___callback_open_lightbox&&t.target.___callback_open_lightbox(t)},t.addEventListener("mouseenter",t.___button_listener_mouseenter),t.addEventListener("mouseleave",t.___button_listener_mouseleave),t.addEventListener("mousedown",t.___button_listener_mousedown)):t.classList.contains("button-press")&&(t.___button_listener_mousedown=function(t){var e=t.target,n=o.getButtonState(e);"on"===n?o.setButtonState(e,"off"):"off"===n&&o.setButtonState(e,"on")},t.___button_listener_mouseup=function(t){var e=(new Date).getTime();if(t.target.___button_listener_mouseup_time){var n=e-t.target.___button_listener_mouseup_time;100<n&&n<500&&t.target.___callback_open_lightbox&&t.target.___callback_open_lightbox(t)}t.target.___button_listener_mouseup_time=e},t.addEventListener("mousedown",t.___button_listener_mousedown),t.addEventListener("mouseup",t.___button_listener_mouseup)),t.___callback_open_lightbox||(t.___callback_open_lightbox=function(t){})},transformButton:function(t){t.classList.contains("button-hover")&&(this.clearButtonEvents(t),t.classList.remove("button-hover"),t.classList.add("button-press"),this.initButton(t))},transformButtonByScrolls:function(t){if(t.classList.contains("button-hover")){var e=t.getAttribute("button-scroll");if(null!==e)for(var n=window.innerHeight,o=this.body.querySelectorAll(e),a=0;a<o.length;a++){var i=o[a].getBoundingClientRect();if(i.top+i.height>n){this.transformButton(t);break}}}},updateButtons:function(){for(var t=this.body.querySelectorAll(".button-hover, .button-press"),e=0;e<t.length;e++){var n=t[e];this.touch?this.transformButton(n):this.initButton(n)}}};var manager_ui=null,manager_animations=null,manager_gallery=null;window.onload=function(t){manager_ui=new UI,manager_animations=new Animations,manager_gallery=new Gallery(manager_ui,manager_animations)};