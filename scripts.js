function Animations(){}function loadJSON(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status&&t(JSON.parse(n.responseText))},n.send(null)}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t};var YouTubeAPIInitialized=!(Animations.prototype={triggers:[],constructor:Animations,applyLiveCSSAnimations:function(){for(var u=this,e=document.getElementsByTagName("*"),t=e.length;t--;){var n=e[t],o=window.getComputedStyle(n);if(h=o.getPropertyValue("--anim-play")){for(var a=o.getPropertyValue("--anim-init"),i=o.getPropertyValue("--anim-class"),r=o.getPropertyValue("--anim-trigger"),s=o.getPropertyValue("--anim-edge"),l=o.getPropertyValue("--anim-delay-min"),c=o.getPropertyValue("--anim-delay-max"),g=!1,d=0;d<u.triggers.length;d++){if((_=u.triggers[d]).target.contains(n)&&_.anim_play===h&&_.anim_init===a&&_.anim_class===i&&_.anim_trigger===r&&_.anim_edge===s&&_.anim_delay_min===l&&_.anim_delay_max===c){g=!0;break}if(n.contains(_.target)&&_.anim_play===h&&_.anim_init===a&&_.anim_class===i&&_.anim_trigger===r&&_.anim_edge===s&&_.anim_delay_min===l&&_.anim_delay_max===c){u.triggers.splice(d,1);break}}g||u.triggers.push({target:n,anim_play:h,anim_init:a,anim_class:i,anim_trigger:r,anim_edge:s,anim_delay_min:l,anim_delay_max:c})}}function m(){for(var e=[],t=0;t<u.triggers.length;t++){var n=u.triggers[t],o=n.target,a=n.anim_trigger,i=n.anim_init,r=n.anim_class,s=n.anim_play,l=n.anim_edge;isInViewport(a,l)?(i&&o.classList.remove(i),r?o.classList.add(r):o.style.setProperty("animation-name",s)):e.push(n)}u.triggers=e}for(t=0;t<u.triggers.length;t++){var _,b=(_=u.triggers[t]).target,h=_.anim_play;a=_.anim_init,i=_.anim_class,r=_.anim_trigger,s=_.anim_edge,l=_.anim_delay_min,c=_.anim_delay_max;a&&b.classList.add(a),l&&c&&(l=parseFloat(l),c=parseFloat(c),b.style.setProperty("animation-delay",l+(c-l)*Math.random()+"s")),_.anim_trigger=r="self"===r?b:document.getElementById(r),_.anim_edge=s=s?parseFloat(s):0}m(),window.addEventListener("resize",m),window.addEventListener("scroll",m),this.applyLiveCSSAnimations=null},isInViewport:function(e,t){var n=window.innerHeight,o=e.getBoundingClientRect(),a=n*Math.min(t,.4),i=o.top-a,r=o.bottom-a;return!((n-=2*a)<i||r<0)}}),YouTubeAPIPlayersQueue=[],YouTubeAPIPlayers=[];function YouTubeAPIAddPlayer(e){YouTubeAPIPlayersQueue.push(e)}function YouTubeAPIInit(){if(0==YouTubeAPIInitialized){YouTubeAPIInitialized=!0;var e=document.createElement("script");e.id="iframe-api",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}function onYouTubeIframeAPIReady(){for(var e=0;e<YouTubeAPIPlayersQueue.length;e++){var t=YouTubeAPIPlayersQueue[e],n=new YT.Player(t.id,t.params);YouTubeAPIPlayers.push(n)}}function Gallery(o,e){var a=this;function t(){var e=document.querySelectorAll(".gallery-block");if(e)for(var t=0;t<e.length;t++){var n=e[t];0==n.classList.contains("button-hover")&&(n.classList.add("button-hover"),n.classList.add("hidden"),n.setAttribute("button-target","<this>"),n.setAttribute("button-clear",".gallery-block"),n.___callback_open_lightbox=function(e){"gallery-images"===e.target.parentNode.id?a.manager_images.showLightbox(e.target.querySelector("img")):e.target.parentNode.id})}o.updateButtons()}a.manager_videos=new GalleryVideos(document.getElementById("gallery-videos"),"data/gallery-videos.json",e,0,function(){console.log("Video Gallery Initialized")}),a.manager_images=new GalleryImages(document.getElementById("gallery-images"),"data/gallery-images.json",function(){console.log("Image Gallery Initialized")},function(){console.log("Image Gallery Update"),t()}),t()}function GalleryVideos(e,t,s,l,u){var c=this;c.container=e,YouTubeAPIInit(),loadJSON(t,function(e){var t=-1;for(var n in e.videos)if(t++,e.videos.hasOwnProperty(n)){var o=e.videos[n],a=document.createElement("div"),i=document.createElement("img"),r=document.createElement("div");i.id="youtube-cover-"+t,r.id="youtube-player-"+t,i.src=o.cover,i.className="video-cover",a.className="video-wrapper gallery-block",a.appendChild(i),a.appendChild(r),c.container.appendChild(a),YouTubeAPIAddPlayer({id:r.id,params:{width:640,height:360,videoId:n,playerVars:{enablejsapi:1,loop:1,start:o.start,playlist:n,autoplay:0,controls:0,showinfo:0,fs:0,rel:0,disablekb:1,modestbranding:1,playsinline:1},events:{onReady:function(e){var t=e.target,n=t.getIframe();function o(){s.isInViewport(n.parentNode,l)?(void 0===t.timer&&(t.timer=null),null!=t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){s.isInViewport(n.parentNode,l)&&t.playVideo()},500)):t.pauseVideo()}t.mute(),t.setPlaybackQuality("small"),t.playVideo(),t.pauseVideo(),o(),window.addEventListener("resize",o),window.addEventListener("scroll",o)},onStateChange:function(e){var t=e.target.getIframe().parentNode.querySelector(".video-cover");switch(e.data){case YT.PlayerState.BUFFERING:t.classList.remove("cover-hidden"),t.classList.add("cover-visible");break;case YT.PlayerState.PLAYING:t.classList.remove("cover-visible"),t.classList.add("cover-hidden")}},onError:function(e){switch(e.data){case 2:console.log("YouTube API error 2");break;case 5:console.log("YouTube API error 5");break;case 100:console.log("YouTube API error 100");break;case 101:console.log("YouTube API error 101");break;case 150:console.log("YouTube API error 150")}}}}})}u()})}function GalleryImages(t,n,l,u){var c=this;c.container=t,c.lightbox=t.querySelector("#lightbox"),c.lightbox_img=t.querySelector("#lightbox-image"),c.lightbox_visible=!1,c.lightbox.onclick=function(e){c.hideLightbox()},c.hideLightbox(),c.layout=new Masonry("#gallery-images",{itemSelector:".gallery-block",columnWidth:".gallery-block",percentPosition:!0,transitionDuration:0,stagger:0,resize:!0}),loadJSON(n,function(t){for(var n=0;n<t.images.length;n++){var o=document.createElement("div"),a=document.createElement("img"),i=t.images[n],r=i.split(".").slice(0,-1).join("."),s=i.substring(r.length,i.length);o.className="gallery-block",a.src=r+"_tumbnail"+s,a.setAttribute("src-lightbox",i),o.appendChild(a),c.container.appendChild(o),a.addEventListener("load",function(e){c.layout.appended(e.target.parentNode),c.layout.layout(),u()}),a.addEventListener("error",function(){e.target.remove(),c.layout.layout(),u()})}l()})}function UI(){var t=this;t.ui=document.getElementById("ui"),t.body=document.getElementsByTagName("BODY")[0],window.addEventListener("touchstart",function e(){console.log("User touched !"),t.touch=!0,t.updateButtons(),window.removeEventListener("touchstart",e,!1)},!1),t.updateButtons();var e=t.ui.querySelector("#contact-button"),n=t.ui.querySelector("#contact-email"),o="szontagh";e.href="mailto:andrej."+o+"@gmail.com",n.innerHTML="andrej​.​"+o+" ​@ ​gmail​.​com";var a=document.getElementById("overlay");a.addEventListener("onvisible",function(e){t.ui.classList.add("overlay"),t.body.classList.add("noscroll")},!1),a.addEventListener("onhidden",function(e){t.ui.classList.remove("overlay"),t.body.classList.remove("noscroll")},!1)}Gallery.prototype={constructor:Gallery,manager_videos:null,manager_images:null,showLightbox:function(e){console.log("showLightbox")},hideLightbox:function(){console.log("hideLightbox")}},GalleryVideos.prototype={constructor:GalleryVideos},GalleryImages.prototype={constructor:GalleryImages,showLightbox:function(e){this.lightbox.classList.remove("lightbox-hidden"),this.lightbox.classList.add("lightbox-visible"),this.lightbox_img.setAttribute("src",e.getAttribute("src")),this.lightbox_img.setAttribute("src-lazy",e.getAttribute("src-lightbox")),this.lightbox_img.onload=function(e){var t=e.target;t.src=t.getAttribute("src-lazy")},this.lightbox_visible=!0},hideLightbox:function(){this.lightbox.classList.remove("lightbox-visible"),this.lightbox.classList.add("lightbox-hidden"),this.lightbox_visible=!1}},UI.prototype={constructor:UI,touch:!1,body:null,ui:null,parseButtonStateRef:function(e){var t={value:null,value_ext:null,value_readonly:!1},n=e.getAttribute("button-state");return n&&((n=n.trim())&&0<n.length&&"["===n.charAt(0)&&"]"===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1),t.value_readonly=!0),"on"===n&&(t.value="on"),"off"!==n&&""!==n||(t.value="off"),n&&0<n.length&&"{"===n.charAt(0)&&"}"===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1),t.value_ext=n)),t},setButtonState:function(e,t,n){n=void 0===n||n;var o=this;if(e.classList.contains("button-hover")||e.classList.contains("button-press")){if(o.parseButtonStateRef(e).value_readonly||e.setAttribute("button-state",t),!0===n){var a=e.getAttribute("button-clear");if(null!==a)for(var i=o.body.querySelectorAll(a),r=0;r<i.length;r++)i[r]!==e&&"on"===o.getButtonState(i[r])&&o.setButtonState(i[r],"off",!1)}if("on"===t){if(!0===n)if(null!==(s=e.getAttribute("button-set-on")))for(i=o.body.querySelectorAll(s),r=0;r<i.length;r++)i[r]!==e&&o.setButtonState(i[r],t,!1);o.showButtonTargets(e,"button-target",!0)}if("off"===t){var s;if(!0===n)if(null!==(s=e.getAttribute("button-set-off")))for(i=o.body.querySelectorAll(s),r=0;r<i.length;r++)i[r]!==e&&o.setButtonState(i[r],t,!1);o.showButtonTargets(e,"button-target",!1)}}},getButtonState:function(e){var t=this.parseButtonStateRef(e);if("on"===t.value||"off"===t.value)return t.value;if(null!==t.value_ext){var n=this.body.querySelector(attr);if(n){var o=this.parseButtonStateRef(n);if("on"===o.value||"off"===o.value)return o.value}}return"off"},showButtonTargets:function(e,t,n){var o,a=e.getAttribute(t);if(a&&null!=(o="<this>"===a.trim()?[e]:this.body.querySelectorAll(a)))for(var i=0;i<o.length;i++){var r=o[i];n?(r.classList.remove("hidden"),r.classList.add("visible"),r.dispatchEvent(new Event("onvisible"))):(r.classList.remove("visible"),r.classList.add("hidden"),r.dispatchEvent(new Event("onhidden")))}},clearButtonEvents:function(e){e.removeEventListener("mouseenter",e.___button_listener_mouseenter),e.removeEventListener("mouseleave",e.___button_listener_mouseleave),e.removeEventListener("mousedown",e.___button_listener_mousedown),e.removeEventListener("mouseup",e.___button_listener_mouseup)},initButton:function(e){var o=this;o.clearButtonEvents(e),null===e.getAttribute("button-state")&&e.setAttribute("button-state","off"),e.classList.contains("button-hover")?(e.___button_listener_mouseleave=function(e){o.setButtonState(e.target,"off")},e.___button_listener_mouseenter=function(e){o.setButtonState(e.target,"on"),o.transformButtonByScrolls(e.target)},e.___button_listener_mousedown=function(e){e.target.___callback_open_lightbox&&e.target.___callback_open_lightbox(e)},e.addEventListener("mouseenter",e.___button_listener_mouseenter),e.addEventListener("mouseleave",e.___button_listener_mouseleave),e.addEventListener("mousedown",e.___button_listener_mousedown)):e.classList.contains("button-press")&&(e.___button_listener_mousedown=function(e){var t=e.target,n=o.getButtonState(t);"on"===n?o.setButtonState(t,"off"):"off"===n&&o.setButtonState(t,"on")},e.___button_listener_mouseup=function(e){var t=(new Date).getTime();if(e.target.___button_listener_mouseup_time){var n=t-e.target.___button_listener_mouseup_time;100<n&&n<500&&e.target.___callback_open_lightbox&&e.target.___callback_open_lightbox(e)}e.target.___button_listener_mouseup_time=t},e.addEventListener("mousedown",e.___button_listener_mousedown),e.addEventListener("mouseup",e.___button_listener_mouseup)),e.___callback_open_lightbox||(e.___callback_open_lightbox=function(e){})},transformButton:function(e){e.classList.contains("button-hover")&&(this.clearButtonEvents(e),e.classList.remove("button-hover"),e.classList.add("button-press"),this.initButton(e))},transformButtonByScrolls:function(e){if(e.classList.contains("button-hover")){var t=e.getAttribute("button-scroll");if(null!==t)for(var n=window.innerHeight,o=this.body.querySelectorAll(t),a=0;a<o.length;a++){var i=o[a].getBoundingClientRect();if(i.top+i.height>n){this.transformButton(e);break}}}},updateButtons:function(){for(var e=this.body.querySelectorAll(".button-hover, .button-press"),t=0;t<e.length;t++){var n=e[t];this.touch?this.transformButton(n):this.initButton(n)}}};var manager_ui=null,manager_animations=null,manager_gallery=null;window.onload=function(e){manager_ui=new UI,manager_animations=new Animations,manager_gallery=new Gallery(manager_ui,manager_animations)};